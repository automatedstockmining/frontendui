{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jamesmacquillan/Documents/chatbot-im-1o/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/jamesmacquillan/Documents/chatbot-im-1o/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/jamesmacquillan/Documents/chatbot-im-1o/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{checkApiKey}from'../utils/checkKeys';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Setting=function Setting(_ref){var modalOpen=_ref.modalOpen,setModalOpen=_ref.setModalOpen;var apiKey=window.localStorage.getItem('api-key');var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),errorMsg=_useState4[0],setErrorMsg=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),input=_useState6[0],setInput=_useState6[1];var saveKey=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var keys;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();setLoading(true);setErrorMsg('');keys=input;_context.next=6;return checkApiKey(keys).then(function(){window.localStorage.setItem('api-key',keys);console.log('works');setModalOpen(false);}).catch(function(){console.log('doesnt work');setErrorMsg('error: incorrect keys');});case 6:setLoading(false);case 7:case\"end\":return _context.stop();}},_callee);}));return function saveKey(_x){return _ref2.apply(this,arguments);};}();var removeApiKey=function removeApiKey(){window.localStorage.removeItem('api-key');setInput('');};useEffect(function(){if(modalOpen){setInput(apiKey);}},[apiKey,modalOpen]);return/*#__PURE__*/_jsxs(\"form\",{onSubmit:saveKey,className:\"flex flex-col items-center justify-center gap-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-semibold\",children:\"Use your own API-key.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"keys are saved in your own browser\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"italic\",children:[\"Get OpenAI API key\",' ',/*#__PURE__*/_jsx(\"a\",{className:\"text-blue-600\",rel:\"noreferrer\",target:\"_blank\",href:\"https://platform.openai.com/account/api-keys\",children:\"here\"}),\".\"]}),/*#__PURE__*/_jsx(\"input\",{value:input,onChange:function onChange(e){return setInput(e.target.value);},type:\"password\",className:\"w-full max-w-xs input input-bordered\"}),/*#__PURE__*/_jsx(\"button\",{disabled:loading,className:\"w-full max-w-xs btn btn-outline\",children:loading?/*#__PURE__*/_jsx(\"span\",{className:\"w-56 progress progress-info\"}):'save to localStorage'}),apiKey&&input&&/*#__PURE__*/_jsx(\"span\",{onClick:removeApiKey,disabled:loading,className:\"w-full max-w-xs btn btn-error\",children:\"remove keys\"}),/*#__PURE__*/_jsx(\"p\",{children:errorMsg})]});};export default Setting;","map":{"version":3,"names":["React","useEffect","useState","checkApiKey","jsx","_jsx","jsxs","_jsxs","Setting","_ref","modalOpen","setModalOpen","apiKey","window","localStorage","getItem","_useState","_useState2","_slicedToArray","loading","setLoading","_useState3","_useState4","errorMsg","setErrorMsg","_useState5","_useState6","input","setInput","saveKey","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","keys","wrap","_callee$","_context","prev","next","preventDefault","then","setItem","console","log","catch","stop","_x","apply","arguments","removeApiKey","removeItem","onSubmit","className","children","rel","target","href","value","onChange","type","disabled","onClick"],"sources":["/Users/jamesmacquillan/Documents/chatbot-im-1o/src/components/Setting.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { checkApiKey } from '../utils/checkKeys';\n\nconst Setting = ({ modalOpen, setModalOpen }) => {\n  const apiKey = window.localStorage.getItem('api-key');\n  const [loading, setLoading] = useState(false);\n  const [errorMsg, setErrorMsg] = useState('');\n  const [input, setInput] = useState('');\n\n  const saveKey = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setErrorMsg('');\n    const keys = input;\n\n    await checkApiKey(keys)\n      .then(() => {\n        window.localStorage.setItem('api-key', keys);\n        console.log('works');\n        setModalOpen(false);\n      })\n      .catch(() => {\n        console.log('doesnt work');\n        setErrorMsg('error: incorrect keys');\n      });\n\n    setLoading(false);\n  };\n\n  const removeApiKey = () => {\n    window.localStorage.removeItem('api-key');\n    setInput('');\n  };\n\n  useEffect(() => {\n    if (modalOpen) {\n      setInput(apiKey);\n    }\n  }, [apiKey, modalOpen]);\n\n  return (\n    <form\n      onSubmit={saveKey}\n      className='flex flex-col items-center justify-center gap-2'>\n      <p className='text-lg font-semibold'>Use your own API-key.</p>\n      <p>keys are saved in your own browser</p>\n      <p className='italic'>\n        Get OpenAI API key{' '}\n        <a\n          className='text-blue-600'\n          rel='noreferrer'\n          target='_blank'\n          href='https://platform.openai.com/account/api-keys'>\n          here\n        </a>\n        .\n      </p>\n      <input\n        value={input}\n        onChange={(e) => setInput(e.target.value)}\n        type='password'\n        className='w-full max-w-xs input input-bordered'\n      />\n      <button disabled={loading} className='w-full max-w-xs btn btn-outline'>\n        {loading ? (\n          <span className='w-56 progress progress-info' />\n        ) : (\n          'save to localStorage'\n        )}\n      </button>\n      {apiKey && input && (\n        <span\n          onClick={removeApiKey}\n          disabled={loading}\n          className='w-full max-w-xs btn btn-error'>\n          remove keys\n        </span>\n      )}\n      <p>{errorMsg}</p>\n    </form>\n  );\n};\n\nexport default Setting;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}